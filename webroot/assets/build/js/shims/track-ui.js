!function(e){if(webshims.support.texttrackapi&&document.addEventListener){var t=webshims.cfg.track,a=function(t){e(t.target).filter("track").each(n)},i=webshims.bugs.track,n=function(){return i||!t.override&&3==e.prop(this,"readyState")?(t.override=!0,webshims.reTest("track"),document.removeEventListener("error",a,!0),this&&e.nodeName(this,"track")?webshims.error("track support was overwritten. Please check your vtt including your vtt mime-type"):webshims.info("track support was overwritten. due to bad browser support"),!1):void 0};t.override||e((function(){document.addEventListener("error",a,!0),i?n():e("track").each(n),i||t.override||webshims.defineProperty(TextTrack.prototype,"shimActiveCues",{get:function(){return this._shimActiveCues||this.activeCues}})}))}}(webshims.$),webshims.register("track-ui",(function(e,t,a,i,n){"use strict";function r(a,i,n,r,s){var c,o=e.Event("cuechange");n.trackElements||(n.trackElements=r[0].getElementsByTagName("track")),(c=n.trackElements[s])&&(t.data(c,"trackData")||{track:e.prop(c,"track")}).track!=a.track&&(c=null),e.event.trigger(o,null,a.track,!0),c&&e.event.trigger(o,null,c,!0),e.event.trigger(i,null,a,!0)}var s=t.cfg.track,c=t.support,o={subtitles:1,captions:1,descriptions:1},u=t.mediaelement,d=function(){return!s.override&&c.texttrackapi},p=a.cancelAnimationFrame&&a.requestAnimationFrame||function(e){setTimeout(e,17)},l=a.cancelAnimationFrame||a.clearTimeout,m={update:function(a,i){a.activeCues.length?function(e,t){var a=!0,i=0,n=e.length;if(n!=t.length)a=!1;else for(;n>i;i++)if(e[i]!=t[i]){a=!1;break}return a}(a.displayedActiveCues,a.activeCues)||(a.displayedActiveCues=a.activeCues,a.trackDisplay||(a.trackDisplay=e('<div class="cue-display '+t.shadowClass+'"><span class="description-cues" aria-live="assertive" /></div>').insertAfter(i),this.addEvents(a,i),t.docObserve()),a.hasDirtyTrackDisplay&&i.triggerHandler("forceupdatetrackdisplay"),this.showCues(a)):this.hide(a)},showCues:function(t){var a=e('<span class="cue-wrapper" />');e.each(t.displayedActiveCues,(function(i,n){var r=n.id?'id="cue-id-'+n.id+'"':"",s=e('<span class="cue-line"><span '+r+' class="cue" /></span>').find("span").html(n.getCueAsHTML()).end();"descriptions"==n.track.kind?setTimeout((function(){e("span.description-cues",t.trackDisplay).html(s)}),0):a.prepend(s)})),e("span.cue-wrapper",t.trackDisplay).remove(),t.trackDisplay.append(a)},addEvents:function(e,t){if(s.positionDisplay){var a,i=function(a){if(e.displayedActiveCues.length||!0===a){e.trackDisplay.css({display:"none"});var i=t.getShadowElement(),n=i.innerHeight(),r=i.innerWidth(),s=i.position();e.trackDisplay.css({left:s.left,width:r,height:n-45,top:s.top,display:"block"}),e.trackDisplay.css("fontSize",Math.max(Math.round(n/30),7)),e.hasDirtyTrackDisplay=!1}else e.hasDirtyTrackDisplay=!0},n=function(){clearTimeout(a),a=setTimeout(i,0)},r=function(){i(!0)};t.on("playerdimensionchange mediaelementapichange updatetrackdisplay updatemediaelementdimensions swfstageresize",n),t.on("forceupdatetrackdisplay",r).onWSOff("updateshadowdom",n),r()}},hide:function(t){t.trackDisplay&&t.displayedActiveCues.length&&(t.displayedActiveCues=[],e("span.cue-wrapper",t.trackDisplay).remove(),e("span.description-cues",t.trackDisplay).empty())}};if(u.trackDisplay=m,!u.createCueList){var v={getCueById:function(e){for(var t=null,a=0,i=this.length;i>a;a++)if(this[a].id===e){t=this[a];break}return t}};u.createCueList=function(){return e.extend([],v)}}u.getActiveCue=function(t,a,i,n,d){t._lastFoundCue||(t._lastFoundCue={index:0,time:0}),t._shimActiveCues||!c.texttrackapi||s.override||(t._shimActiveCues=u.createCueList());for(var p,l,m,v=0;v<t.shimActiveCues.length;v++)(l=t.shimActiveCues[v]).startTime>i||l.endTime<i?(t.shimActiveCues.splice(v,1),v--,l.pauseOnExit&&e(a).pause(),r(l,"exit",n,a,d)):(m=l.endTime-i,n.nextUpdateDelay>m&&(n.nextUpdateDelay=m,n.nextEvent=l.endTime),"showing"==t.mode&&o[t.kind]&&-1==e.inArray(l,n.activeCues)&&n.activeCues.push(l));for(p=t.cues.length,v=t._lastFoundCue.time<i?t._lastFoundCue.index:0;p>v;v++)if((l=t.cues[v]).startTime<=i&&l.endTime>=i&&-1==e.inArray(l,t.shimActiveCues)&&(t.shimActiveCues.push(l),"showing"==t.mode&&o[t.kind]&&n.activeCues.push(l),r(l,"enter",n,a,d),t._lastFoundCue.time=i,t._lastFoundCue.index=v,m=l.endTime-i,n.nextUpdateDelay>m&&(n.nextUpdateDelay=m,n.nextEvent=l.endTime)),l.startTime>i){m=l.startTime-i,n.nextUpdateDelay>m&&(n.nextUpdateDelay=m,n.nextEvent=l.startTime);break}};var k=function(){return t.implement(this,"trackui")},h=function(){var a,i,r,s,c,o,v,k,h=e(this),f=0,y=function(){9>++f?h.prop("currentTime")>a.nextEvent?(f=n,g()):k=p(y):f=n},g=function(e){var n,d;if(i&&a||(i=h.prop("textTracks"),(a=t.data(h[0],"mediaelementBase")||t.data(h[0],"mediaelementBase",{})).displayedActiveCues||(a.displayedActiveCues=[])),i&&!(!(d=h.prop("currentTime"))&&0!==d||a.nextEvent&&e&&"timeupdate"==e.type&&d>=o&&a.nextEvent-d>.27&&9>d-o)){o=d,c=a.nextUpdateDelay,a.nextUpdateDelay=Number.MAX_VALUE,a.activeCues=[];for(var p=0,v=i.length;v>p;p++)"disabled"!=(n=i[p]).mode&&n.cues&&n.cues.length&&u.getActiveCue(n,h,d,a,p);m.update(a,h),clearTimeout(r),a.nextUpdateDelay<=.27&&(e||c!=a.nextUpdateDelay)&&a.nextUpdateDelay>0?(c=a.nextUpdateDelay,clearTimeout(s),k&&l(k),f=0,s=setTimeout(y,1e3*a.nextUpdateDelay+9)):a.nextUpdateDelay>=Number.MAX_VALUE&&(a.nextEvent=d+2)}},C=function(){a&&a.trackElements&&delete a.trackElements},T=function(e){a&&e&&("addtrack"==e.type||"removetrack"==e.type)&&(clearTimeout(v),v=setTimeout(C,39)),clearTimeout(r),r=setTimeout(g,40)},w=function(){i||(a&&"blockTrackListUpdate"in a&&(a.blockTrackListUpdate=!0),i=h.prop("textTracks"),a&&a.blockTrackListUpdate&&(a.blockTrackListUpdate=!1)),e([i]).off(".trackview").on("change.trackview addtrack.trackview removetrack.trackview",T),h.off(".trackview").on("emptied.trackview",C).on("play.trackview playing.trackview updatetrackdisplay.trackview seeked.trackview",T).on("timeupdate.trackview",g)};h.on("remove",(function(e){!e.originalEvent&&a&&a.trackDisplay&&setTimeout((function(){a.trackDisplay.remove()}),4)})),d()?(h.hasClass("nonnative-api-active")&&w(),h.on("mediaelementapichange trackapichange",(function(){!d()||h.hasClass("nonnative-api-active")?w():(clearTimeout(r),clearTimeout(s),k&&l(k),i=h.prop("textTracks"),a=t.data(h[0],"mediaelementBase")||t.data(h[0],"mediaelementBase",{}),e.each(i,(function(e,t){t._shimActiveCues&&delete t._shimActiveCues})),e([i]).off(".trackview"),m.hide(a),h.off(".trackview"))}))):w()};d()&&(function(){var a,i=function(i,n,r){var s,c="_sup"+r,o={prop:{}};o.prop[r]=function(){return!a&&d()&&function(t){a=!0,setTimeout((function(){e(t).triggerHandler("updatetrackdisplay"),a=!1}),9)}(e(this).closest("audio, video")),s.prop[c].apply(this,arguments)},s=t.defineNodeNameProperty(i,n,o)};i("track","track","get"),["audio","video"].forEach((function(e){i(e,"textTracks","get"),i("nodeName","addTextTrack","value")}))}(),e.propHooks.activeCues={get:function(e){return e._shimActiveCues||e.activeCues}}),t.addReady((function(t,a){e("video, audio",t).add(a.filter("video, audio")).filter(k).each(h)}))}));