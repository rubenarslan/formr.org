webshims.register("mediaelement-native-fix",(function(e,t,r,a){var o=t.support,i=function(){if(o.videoBuffered)return e.noop;var r=function(e){var r=t.data(e,"mediaelementBuffered");return r||(r={buffered:{start:function(e){return e>=r.buffered.length?void t.error("buffered index size error"):0},end:function(e){return e>=r.buffered.length?void t.error("buffered index size error"):r.loaded},length:0},loaded:0},t.data(e,"mediaelementBuffered",r)),r},a=function(a){if((a=a.originalEvent)&&"lengthComputable"in a){var o=t.data(a.target,"mediaelement");if((!o||"html5"==o.isActive)&&a.lengthComputable&&"loaded"in a){var i=a.target.duration,d=r(a.target);d.loaded=i?a.loaded/a.total*i:0,d.loaded&&(d.buffered.length=1),"load"==a.type&&e(a.target).triggerHandler("progress")}}},i=function(e){var t=r(e.target);t.buffered.length=0,t.loaded=0};return["audio","video"].forEach((function(e){var a=t.defineNodeNameProperty(e,"buffered",{prop:{get:function(){var e=t.data(this,"mediaelement");return e&&"flash"==e.isActive&&a.prop._supget?void a.prop._supget.apply(this):r(this).buffered}}})})),function(){e(this).off("load progress",a).off("emptied",i).on("load progress",a).on("emptied",i)}}();!function(){var e=a.createElement("video");if(!("preload"in e)&&"autobuffer"in e){var r={metadata:1,none:1};t.onNodeNamesPropertyModify(["audio","video"],["preload"],{set:function(e,a,o){r[e]||"removeAttr"==o?this.autobuffer=!1:"html5"==!(t.data(this,"mediaelement")||{}).isActive&&(this.autobuffer=!0)},initAttr:!0})}}();var d=o.mediaDefaultMuted?e.noop:function(){if(!e.data(this,"fixedMediaProgress")){var a,o,i=this,d=function(){var t=e.prop(i,"buffered");if(t){for(var r="",a=0,o=t.length;o>a;a++)r+=t.end(a);return r}},n=function(){var r=d();r!=o&&(o=r,t.error("needed to trigger progress manually"),e(i).triggerHandler("progress"))};e(this).data("fixedMediaProgress",!0).on({"play loadstart progress":function(e){"progress"==e.type&&(o=d()),clearTimeout(a),a=setTimeout(n,800)},"emptied stalled mediaerror abort suspend":function(e){"emptied"==e.type&&(o=!1),clearTimeout(a)}}),"ActiveXObject"in r&&e.prop(this,"paused")&&!e.prop(this,"readyState")&&e(this).is('audio[preload="none"][controls]:not([autoplay],.nonnative-api-active)')&&e(this).prop("preload","metadata").mediaLoad()}};t.addReady((function(t,r){e("video, audio",t).add(r.filter("video, audio")).each(i).each(d)}))}));