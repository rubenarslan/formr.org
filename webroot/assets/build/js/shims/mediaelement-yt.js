webshims.register("mediaelement-yt",(function(e,t,a,i,r){"use strict";var n=t.mediaelement,o=e.Deferred(),d=function(){a.YT||t.loader.loadScript("https://www.youtube.com/player_api"),d=e.noop},l=a.Modernizr,u=(!l||!l.videoautoplay)&&/iP(hone|od|ad)|android/i.test(navigator.userAgent);a.onYouTubePlayerAPIReady=function(){o.resolve(),d=e.noop},a.YT&&YT.Player&&a.onYouTubePlayerAPIReady();var s={paused:!0,ended:!1,currentSrc:"",duration:a.NaN,readyState:0,networkState:0,videoHeight:0,videoWidth:0,error:null,buffered:{start:function(e){return e?void t.error("buffered index size error"):0},end:function(e){return e?void t.error("buffered index size error"):0},length:0}},h=Object.keys(s),c=e.extend({isActive:"html5",activating:"html5",wasSwfReady:!1,_metadata:!1,_callMeta:!1,currentTime:0,_buffered:0,_ppFlag:r},s,{currentTime:0,volume:1,muted:!1}),m=function(t,a){(a=e.Event(a)).preventDefault(),e.event.trigger(a,r,t)},g=function(){var e=["_buffered","_metadata","_ppFlag","currentSrc","currentTime","duration","ended","networkState","paused","videoHeight","videoWidth","_callMeta"],t=e.length;return function(a){if(a){var i=t,r=a.networkState;for(a.readyState=0;--i;)delete a[e[i]];a.buffered.length=0,clearInterval(a._timeInterval),r&&m(a._elem,"emptied")}}}(),p=function(){var t={},r=function(a){var r,n,o;return t[a.currentSrc]?r=t[a.currentSrc]:a.videoHeight&&a.videoWidth?(t[a.currentSrc]={width:a.videoWidth,height:a.videoHeight},r=t[a.currentSrc]):(n=e.attr(a._elem,"poster"))&&((r=t[n])||((o=i.createElement("img")).onload=function(){t[n]={width:this.width,height:this.height},t[n].height&&t[n].width?v(a,e.prop(a._elem,"controls")):delete t[n],o.onload=null},o.src=n,o.complete&&o.onload&&o.onload())),r||{width:300,height:"video"==a._elemNodeName?150:50}},n=function(e,t){return e.style[t]||e.currentStyle&&e.currentStyle[t]||a.getComputedStyle&&(a.getComputedStyle(e,null)||{})[t]||""},o=["minWidth","maxWidth","minHeight","maxHeight"],d=function(e,t){var a,i,r=!1;for(a=0;4>a;a++)i=n(e,o[a]),parseFloat(i,10)&&(r=!0,t[o[a]]=i);return r};return function(t){var a,i,o=t._elem,l="auto"==n(o,"width"),u="auto"==n(o,"height"),s={width:!l&&e(o).width(),height:!u&&e(o).height()};return(l||u)&&(i=(a=r(t)).width/a.height,l&&u?(s.width=a.width,s.height=a.height):l?s.width=s.height*i:u&&(s.height=s.width/i),d(o,s)&&(t.shadowElem.css(s),l&&(s.width=t.shadowElem.height()*i),u&&(s.height=(l?s.width:t.shadowElem.width())/i),l&&u&&(t.shadowElem.css(s),s.height=t.shadowElem.width()/i,s.width=s.height*i,t.shadowElem.css(s),s.width=t.shadowElem.height()*i,s.height=s.width/i))),s}}(),v=function(e){var t,i=e.shadowElem;"third"==e.isActive&&(e&&e._ytAPI&&e._ytAPI.getPlaybackQuality&&(a.ytapi=e._ytAPI),e._elem.style.display="",t=p(e),e._elem.style.display="none",i.css(t))},y=function(e){try{e.nodeName}catch(e){return null}var a=t.data(e,"mediaelement");return a&&"third"==a.isActive?a:null},f=/vq\=(small|medium|large|hd720|hd1080|highres)/i,w=function(t){t&&(t._ppFlag===r&&e.prop(t._elem,"autoplay")||!t.paused)&&setTimeout((function(){if("third"==t.isActive&&(t._ppFlag===r||!t.paused))try{e(t._elem).play()}catch(e){}}),1)},_=e.noop;!function(){var a={play:1,playing:1},r=["play","pause","playing","canplay","progress","waiting","ended","loadedmetadata","loadstart","durationchange","emptied"],n=r.map((function(e){return e+".webshimspolyfill"})).join(" "),o=function(i){var r=t.data(i.target,"mediaelement");r&&(i.originalEvent&&i.originalEvent.type===i.type)==("third"==r.activating)&&(i.stopImmediatePropagation(),a[i.type]&&r.isActive!=r.activating&&e(i.target).pause())};(_=function(a){e(a).off(n).on(n,o),r.forEach((function(e){t.moveToFirstEvent(a,e)}))})(i)}(),e(i).on("emptied",(function(e){var t=y(e.target);w(t)})),n.setActive=function(a,i,r){if(r||(r=t.data(a,"mediaelement")),r&&r.isActive!=i){"html5"!=i&&"third"!=i&&t.warn("wrong type for mediaelement activating: "+i);var n=t.data(a,"shadowData");r.activating=i,e(a).pause(),r.isActive=i,"third"==i?(n.shadowElement=n.shadowFocusElement=r.shadowElem[0],e(a).addClass("yt-api-active nonnative-api-active").hide().getShadowElement().show()):(clearInterval(r._timeInterval),e(a).removeClass("yt-api-active nonnative-api-active").show().getShadowElement().hide(),n.shadowElement=n.shadowFocusElement=!1),e(a).trigger("mediaelementapichange")}};var I=function(t,a){a._ppFlag=!0,"playing"==t&&(I("play",a),a.readyState<3&&(a.readyState=3,m(a._elem,"canplay")),e(a._elem).trigger("playing")),"play"==t&&a.paused?(a.paused=!1,m(a._elem,"play")):"pause"!=t||a.paused||(a.paused=!0,m(a._elem,"pause"))},S={small:{height:240,width:320},medium:{height:360,width:640},large:{height:480,width:853},hd720:{height:720,width:1280},hd1080:{height:1080,width:1920},highres:{height:1080,width:1920}},P=function(t,a,i,r){o.done((function(){var n=function(){var a,r;i._metadata&&i._ytAPI.getVideoLoadedFraction&&(a=(r=i._ytAPI.getVideoLoadedFraction())*i.duration,i._buffered!==a&&(i._buffered=a,i.buffered.length=1,e(t).trigger("progress")),r>.99&&(i.networkState=1),i.readyState<4&&i.currentTime&&(i._buffered-i.currentTime>9||r>.9)&&(i.readyState=4,m(i._elem,"canplaythrough")))},o=function(){if("third"==i.isActive&&i._ytAPI&&i._ytAPI.getVolume){var a,r=i._ytAPI.getVolume()/100,o=i._ytAPI.isMuted();r!=i.volume&&(i.volume=r,a=!0),o!=i.muted&&(i.muted=o,a=!0),function(){if(i._ytAPI&&i._ytAPI.getCurrentTime){var a=i._ytAPI.getCurrentTime();i.currentTime!=a&&(i.currentTime=a,e(t).trigger("timeupdate")),n()}}(),n(),a&&e(t).trigger("volumechange")}};i._metatrys=0,i._ytAPI=new YT.Player(a,{height:"100%",width:"100%",allowfullscreen:"allowfullscreen",webkitallowfullscreen:"allowfullscreen",playerVars:{allowfullscreen:!0,fs:1,rel:0,showinfo:0,autohide:1,controls:e.prop(t,"controls")?1:0},videoId:r.videoId,events:{onReady:function(){w(i),setTimeout(o,9),setInterval(o,5e3)},onStateChange:function(a){if(a.target.getDuration){var n;if(!i._metadata){r.suggestedQuality&&i._ytAPI.setPlaybackQuality(r.suggestedQuality);var d=a.target.getDuration(),l=a.target.getPlaybackQuality();d&&(i._metadata=!0,i.duration=d,i.readyState<1&&(i.readyState=1),i.networkState<1&&(i.networkState=2),n=!0,S[l]||(l="medium"),i.videoHeight=S[l].height,i.videoWidth=S[l].width),d&&i._metatrys<3&&("unknown"==l||r.suggestedQuality&&l!=r.suggestedQuality)?(i._metatrys++,i._metadata=!1,n=!1):i._metatrys=0}n&&e(t).trigger("durationchange").trigger("loadedmetadata"),setTimeout(o,9),1==a.data?(I("playing",i),clearInterval(i._timeInterval),i._timeInterval=setInterval((function(){var a=i._ytAPI.getCurrentTime();i.currentTime!=a&&(i.currentTime=a,e.event.trigger("timeupdate",null,t,!0))}),270)):2==a.data?(clearInterval(i._timeInterval),I("pause",i)):3==a.data?(i.readyState>2&&(i.readyState=2),i.networkState=2,e(t).trigger("waiting")):0===a.data&&(i.readyState>4&&(i.readyState=4),i.networkState=1,clearInterval(i._timeInterval),e(t).trigger("ended"))}}}}),e(t).on("updateytdata",o)}))};if("matchMedia"in a){var A=!1;try{A=a.matchMedia("only all").matches}catch(e){}A&&(n.sortMedia=function(e,t){return(e=!e.media||matchMedia(e.media).matches)==(t=!t.media||matchMedia(t.media).matches)?0:e?-1:1})}n.createSWF=function(a,i,r){r||(r=t.data(a,"mediaelement"));var l="yt-"+t.getID(a),u=function(a){var i,r=(a.match(f)||["",""])[1].toLowerCase();return-1!=(a=a.split("?"))[0].indexOf("youtube.com/watch")&&a[1]?(a=a[1].split("&"),e.each(a,(function(e,t){return"v"==(t=t.split("="))[0]?(a=t[1],i=!0,!1):void 0}))):-1!=a[0].indexOf("youtube.com/v/")&&(a=a[0].split("/"),e.each(a,(function(e,t){return i?(a=t,!1):void("v"==t&&(i=!0))}))),i||t.error("no youtube id found: "+a),{videoId:a,suggestedQuality:r}}(i.src),s=e.prop(a,"controls"),h={};if(d(),((h.height=e.attr(a,"height")||"")||(h.width=e.attr(a,"width")||""))&&(e(a).css(h),t.warn("width or height content attributes used. Webshims prefers the usage of CSS (computed styles or inline styles) to detect size of a video/audio. It's really more powerfull.")),r)return n.setActive(a,"third",r),r.currentSrc="",g(r),r.currentSrc=i.srcProp,s!=r._hasControls?(r.shadowElem.html('<div id="'+l+'">'),P(a,l,r,u)):o.done((function(){r._ytAPI.cueVideoById&&r._ytAPI.cueVideoById(u)})),r._hasControls=s,void m(r._elem,"loadstart");var p=e('<div class="polyfill-video polyfill-mediaelement '+t.shadowClass+'" id="wrapper-'+l+'"><div id="'+l+'"></div>').css({position:"relative",overflow:"hidden"}),y=function(){v(r)};r=t.data(a,"mediaelement",t.objectCreate(c,{shadowElem:{value:p},_elem:{value:a},_hasControls:{value:s},currentSrc:{value:i.srcProp},buffered:{value:{start:function(e){return e>=r.buffered.length?void t.error("buffered index size error"):0},end:function(e){return e>=r.buffered.length?void t.error("buffered index size error"):r._buffered},length:0}}})),t.addShadowDom(a,p),n.setActive(a,"third",r),_(a),p.insertBefore(a),v(r),P(a,l,r,u),e(a).on("updatemediaelementdimensions loadedmetadata emptied",y).onWSOff("updateshadowdom",y),m(r._elem,"loadstart")},function(){var a,i=function(t){clearTimeout(t.updateDataTimer),t.updateDataTimer=setTimeout((function(){e(t._elem).triggerHandler("updateytdata")}),9)},n={},o=function(e){n[e]={get:function(){var t=y(this);return t?t[e]:a[e].prop._supget.apply(this)},writeable:!1}},d=function(e,t){o(e),delete n[e].writeable,n[e].set=t};h.forEach(o),d("currentTime",(function(e){var t=y(this);return t?(e*=1,void(!isNaN(e)&&t._ytAPI&&t._ytAPI.seekTo&&(t._ytAPI.seekTo(e),i(t)))):a.currentTime.prop._supset.apply(this,arguments)})),d("muted",(function(e){var t=y(this);return t?void(t._ytAPI&&t._ytAPI.mute&&(t._ytAPI[e?"mute":"unMute"](),i(t))):a.muted.prop._supset.apply(this,arguments)})),d("volume",(function(e){var r=y(this);return r?(e*=100,void(!isNaN(e)&&r._ytAPI&&r._ytAPI.setVolume&&((0>e||e>100)&&t.error("volume greater or less than allowed "+e/100),r._ytAPI.setVolume(e),i(r)))):a.volume.prop._supset.apply(this,arguments)})),e.each(["play","pause"],(function(e,i){var o=i+"Video";n[i]={value:function(){var e=y(this);return e?void(e._ytAPI&&e._ytAPI[o]&&(!u||e.readyState||e.networkState||e._ppFlag!==r?(e._ytAPI[o](),I(i,e)):t.warn("youtube video play needs to be directly activated by user, if you use a video overlay set pointer-events to none."))):a[i].prop._supvalue.apply(this,arguments)}}})),a=t.defineNodeNameProperties("video",n,"prop"),t.onNodeNamesPropertyModify("video","controls",(function(t,a){var i=y(this);e(this)[a?"addClass":"removeClass"]("webshims-controls"),i&&i._ytAPI&&!i.readyState&&e(this).mediaLoad()}))}()}));