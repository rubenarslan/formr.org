webshim.register("url",(function(e,t,n,r,a){"use strict";!function(e){var t,o=e.URL;try{if(o){if("searchParams"in(t=new e.URL("http://example.com")))return;"href"in t||(t=a)}}catch(e){}if(e.URL=function(a,u){function i(e,t){var n=e.split("&");t&&-1===n[0].indexOf("=")&&(n[0]="="+n[0]);var r=[];n.forEach((function(e){if(0!==e.length){var t=e.indexOf("=");if(-1!==t)var n=e.substring(0,t),a=e.substring(t+1);else n=e,a="";n=n.replace(/\+/g," "),a=a.replace(/\+/g," "),r.push({name:n,value:a})}}));var a=[];return r.forEach((function(e){a.push({name:decodeURIComponent(e.name),value:decodeURIComponent(e.value)})})),a}function c(){var e=f.href.replace(/#$|\?$|\?(?=#)/g,"");f.href!==e&&(f.href=e)}function s(){p._setPairs(f.search?i(f.search.substring(1)):[]),p._updateSteps()}if(!(this instanceof e.URL))throw new TypeError("Failed to construct 'URL': Please use the 'new' operator.");u&&(a=function(){if(t)return new o(a,u).href;var e;if(r.implementation&&r.implementation.createHTMLDocument?e=r.implementation.createHTMLDocument(""):r.implementation&&r.implementation.createDocument?((e=r.implementation.createElement("http://www.w3.org/1999/xhtml","html",null)).documentElement.appendChild(e.createElement("head")),e.documentElement.appendChild(e.createElement("body"))):n.ActiveXObject&&((e=new n.ActiveXObject("htmlfile")).write("<head></head><body></body>"),e.close()),!e)throw Error("base not supported");var i=e.createElement("base");i.href=u,e.getElementsByTagName("head")[0].appendChild(i);var c=e.createElement("a");return c.href=a,c.href}());var f=function(e){if(t)return new o(e);var n=r.createElement("a");return n.href=e,n}(a||""),h=Object.defineProperties&&function(){var e={};return Object.defineProperties(e,{p:{get:function(){return!0}}}),e.p}(),l=h?this:r.createElement("a"),p=new function(e,t){function n(){o||(o=!0,e.search=r(a),o=!1)}function r(e){var t="",n=!0;return e.forEach((function(e){var r=encodeURIComponent(e.name),a=encodeURIComponent(e.value);n||(t+="&"),t+=r+"="+a,n=!1})),t.replace(/%20/g,"+")}var a=[];t&&(a=i(t)),this._setPairs=function(e){a=e},this._updateSteps=function(){n()};var o=!1;Object.defineProperties(this,{append:{value:function(e,t){a.push({name:e,value:t}),n()}},delete:{value:function(e){for(var t=0;t<a.length;)a[t].name===e?a.splice(t,1):++t;n()}},get:{value:function(e){for(var t=0;t<a.length;++t)if(a[t].name===e)return a[t].value;return null}},getAll:{value:function(e){for(var t=[],n=0;n<a.length;++n)a[n].name===e&&t.push(a[n].value);return t}},has:{value:function(e){for(var t=0;t<a.length;++t)if(a[t].name===e)return!0;return!1}},set:{value:function(e,t){for(var r=!1,o=0;o<a.length;)a[o].name===e?r?a.splice(o,1):(a[o].value=t,r=!0,++o):++o;r||a.push({name:e,value:t}),n()}},toString:{value:function(){return r(a)}}})}(l,f.search?f.search.substring(1):null);return Object.defineProperties(l,{href:{get:function(){return f.href},set:function(e){f.href=e,c(),s()}},origin:{get:function(){return"origin"in f?f.origin:this.protocol+"//"+this.host}},protocol:{get:function(){return f.protocol},set:function(e){f.protocol=e}},username:{get:function(){return f.username},set:function(e){f.username=e}},password:{get:function(){return f.password},set:function(e){f.password=e}},host:{get:function(){var e={"http:":/:80$/,"https:":/:443$/,"ftp:":/:21$/}[f.protocol];return e?f.host.replace(e,""):f.host},set:function(e){f.host=e}},hostname:{get:function(){return f.hostname},set:function(e){f.hostname=e}},port:{get:function(){return f.port},set:function(e){f.port=e}},pathname:{get:function(){return"/"!==f.pathname.charAt(0)?"/"+f.pathname:f.pathname},set:function(e){f.pathname=e}},search:{get:function(){return f.search},set:function(e){f.search!==e&&(f.search=e,c(),s())}},searchParams:{get:function(){return p}},hash:{get:function(){return f.hash},set:function(e){f.hash=e,c()}},toString:{value:function(){return f.toString()}},valueOf:{value:function(){return f.valueOf()}}}),l},o)for(var u in o)o.hasOwnProperty(u)&&(e.URL[u]=o[u])}(n)}));