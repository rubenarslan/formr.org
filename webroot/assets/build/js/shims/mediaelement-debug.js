!function(e,t){"use strict";function o(e,o,r,n){var s,a,i=t.Deferred(),d=t("#wsmediatestcontainer"),c=t("<div />").css({width:320,height:120,float:"left"}),l=t(document.createElement(n.nodeName)).attr({src:e.src,"data-type":o,controls:"controls",preload:"none"}),u=function(){l.pause(),setTimeout((function(){c.remove(),t("video, audio",d).length||d.remove()}),9),setTimeout((function(){i.resolve()}),99)},p=function(t){var o=l.prop("duration"),n=l.prop("currentTime");o&&o>5?n>0&&5>n?u():("ended"==t.type||n>=o-1)&&(e.decode[r].endJump=!0,u()):u()},m=function(o){if(clearTimeout(s),o)if("loadedmetadata"==o.type){if("swf"==r)try{e.decode[r]=l.getShadowElement().find("object, embed")[0].api_get("meta")}catch(o){}(!e.decode[r]||t.isEmptyObject(e.decode[r]))&&(e.decode[r]={duration:l.prop("duration"),height:l.prop("videoHeight"),width:l.prop("videoWidth")}),e.decode[r].success=!0}else e.decode[r]={error:l.prop("error"),mediaError:l.data("mediaerror"),success:!1};else e.decode[r]={success:!1,timeout:!0};setTimeout((function(){l.play()}),9),l.on("ended timeupdate",p),clearTimeout(a),setTimeout(u,300)};return d.length||(d=t('<div id="wsmediatestcontainer" />').css({position:"fixed",top:0,left:0,right:0,padding:10,zIndex:9999999999}).prependTo("body")),l.on("mediaerror loadedmetadata",m).appendTo(c),"native"==r&&l.on("error",m),c.appendTo(d),s=setTimeout(m,4e4),a=setTimeout((function(){l.prop("muted",!0),l.play()}),200),l.mediaLoad(),i}function r(r,n){var s=[],a=r.declaredContainer||r.computedContainer||r.headerContainer||"",l=e.cfg.mediaelement.preferFlash;return c&&n.element.canPlayType(a)?(e.cfg.mediaelement.preferFlash=!1,s.push(o(r,a,"native",n))):r.decode.native={success:!1,notsupported:!0},d&&!/youtube|rtmp/i.test(a)&&-1!=i.swfMimeTypes.indexOf(a)?(e.cfg.mediaelement.preferFlash=!0,s.push(o(r,a,"swf",n))):r.decode.swf={success:!1,notsupported:"video/youtube"!=a},e.cfg.mediaelement.preferFlash=l,t.when.apply(t,s)}function n(e,o){var n=t.Deferred(),s=function(){p||(p++,t(m).off("finish",s),r(e,o).always((function(){n.resolve(),p--,t(m).trigger("finish")})))};p?t(m).on("finish",s):s(),e.decode.promise=n.promise()}function s(e,o){var r,s={src:t.prop(e,"src"),attrSrc:t.trim(t.attr(e,"src")),declaredType:t.attr(e,"type")||t(e).attr("data-type")||"",errors:{},decode:{native:{},swf:{}}};s.declaredContainer=s.declaredType.split(";")[0].trim();try{s.computedContainer=i.getTypeForSrc(s.src,o.nodeName)}catch(e){s.computedContainer=""}if(s.src.indexOf(l))s.cors=!0;else try{s.headerType="",s.headers={},r=t.ajax({url:s.src,type:"head",success:function(){s.headerType=r.getResponseHeader("Content-Type")||"",/^\s*application\/octet\-stream\s*$/i.test(s.headerType)&&(s.headerType="",s.errors.octetStream="octetStream"),s.headerContainer=t.trim(s.headerType.split(";")[0]),["Location","Content-Type","Content-Length","Accept-Ranges","Content-Disposition","Content-Encoding"].forEach((function(e){s.headers[e]=r.getResponseHeader(e)||""}))},error:function(e,t,o){s.httpError=t,s.httpErrorText=o}}),s.ajax=r}catch(e){}return n(s,o),s}function a(e){var o={element:e,nodeName:e.nodeName.toLowerCase(),errors:[],poster:{src:t.prop(e,"poster"),attrSrc:t.trim(t.attr(e,"poster")),errors:{}},mediaError:t.prop(e,"error"),wsError:t(e).data("mediaerror")},r=function(e){var o,r=[],n=[],a=t("source",e.element),i=[],d=t.Deferred(),c=0,l=function(){++c>1&&d.resolve()};return t.prop(e.element,"src")&&((o=s(e.element,e)).attrMode=!0,o.typeNotRequired=!0,r.push(o)),a.each((function(t){var o=s(this,e);o.typeNotRequired=!!(t&&t>=a.length-1),r.push(o),o.ajax&&n.push(o.ajax),o.decode.promise&&i.push(o.decode.promise)})),e.srces=r,t.when.apply(t,i).always(l),t.when.apply(t,n).done(l).fail((function(){setTimeout(l,200)})),d.promise()}(o);r.always((function(){!function(e){t.each(u,(function(t,o){var r,n=!1,s=o.message||t;o.srcTest?(o.srcTest.poster&&(r=o.test(e.poster,e))&&("string"==typeof r?e.poster.errors[t]=r:(e.poster.errors[t]=s,n=!0)),o.srcTest.srces&&e.srces.forEach((function(a){(r=o.test(a,e))&&("string"==typeof r?a.errors[t]=r:(a.errors[t]=s,n=!0))}))):n=o.test(e),n&&e.errors.push({message:s,level:o.level,name:t})})),e.errors.sort((function(e,t){return e.level>t.level})),console.log("---- Media Test Start ----"),console.log("Testing results for mediaelement network + markup debugger. For detailed information expand the following object:",e),e.errors.length?(console.log(e.errors[0].level<3?"Found "+e.errors.length+" errors/warnings with at least 1 critical issue.":e.errors[0].level<4?"Found "+e.errors.length+" errors/warnings.":"Found "+e.errors.length+" warnings but no critical issue."),e.errors.forEach((function(e){var t="log";console.error&&console.warn&&(e.level<3?t="error":e.level<4&&(t="warn")),console[t](e.message,"priority level: "+e.level,e.name)}))):console.log("Congratulations: No errors found for video."),console.log("---- Media Test End ----"),console.log("----")}(o)}))}if(window.console){var i=e.mediaelement,d=swfmini.hasFlashPlayerVersion("10.0.3"),c=e.support.mediaelement,l=location.protocol+"//"+location.hostname,u={urlInValid:{level:1,test:function(){var e=/^[a-z0-9\,\.\:\/\-_\;\?#\+\*\!\(\)\$\;\&\=\+]+$/i;return function(t){return t.src&&!e.test(t.src)}}(),srcTest:{poster:1,srces:1},message:"URL has invalid characters. Remove any special characters and mutated vowels."},noHeaderTest:{level:5,test:function(e){return"video/youtube"!=e.computedContainer&&!e.ajax&&!e.httpError},srcTest:{srces:1},message:"Could not run HTTP network tests (cross-domain) for all sources. Check manually."},hasNoTypeAttribute:{level:4,test:function(e){return!e.declaredType&&!e.typeNotRequired},srcTest:{srces:1},message:"The source element has no type attribute specified. Browser needs to download file before testing compatibility. Add a proper type attribute."},couldNotComputeTypeDeclaredTypeAbsent:{level:1,test:function(e){return!e.computedContainer&&!e.declaredType},srcTest:{srces:1},message:"The source element has no type attribute specified and the extensions seems unknown. Add a proper type attribute."},httpError:{level:2.5,test:function(e){return!e.ajax||e.decode.swf.success||e.decode.native.success?"not testable":!(!e.httpError||e.httpErrorText)},srcTest:{srces:1},message:"There was an unknown http error. Check source/URL."},fileEncoding:{test:function(){return"This test does not test file encoding, framerate compatibility, moov index, encoding profiles. So there is room to fail!"},srcTest:{srces:1}},explicitHttpError:{level:1,test:function(e){return!e.ajax||e.decode.swf.success||e.decode.native.success?"not testable":!!e.httpErrorText},srcTest:{srces:1},message:"There was a http error. Check source/URL."},charsetInContentType:{level:2.5,test:function(e){return!e.ajax||e.httpError?"not testable":e.headerType&&/charset=/i.test(e.headerType)},srcTest:{srces:1},message:"Content-Type header of media file sends charset. Remove charset information."},explicitTypeMix:{level:3,test:function(e){return e.declaredContainer&&e.headerType?e.headerType!=e.declaredType:"not testable"},srcTest:{srces:1},message:"Content-Type header and attribute type do not match. Set same and proper type value."},noContentType:{level:2.5,test:function(e){return e.ajax&&!e.httpError?!e.headerType:"not testable"},srcTest:{srces:1},message:"Content-Type header for media file is either empty or application/octet-stream."},noContentLength:{level:3,test:function(e){return e.ajax&&!e.httpError?!e.headers["Content-Length"]:"not testable"},srcTest:{srces:1},message:"Content-Length header for media file does not send value."},noRange:{level:3,test:function(e){return e.ajax&&!e.httpError?!e.headers["Accept-Ranges"]:"not testable"},srcTest:{srces:1},message:"Accept-Ranges header for media file does not send value. Make sure server supports Range requests in bytes"},explicitNoRange:{level:2.5,test:function(e){return e.ajax&&!e.httpError?"none"==e.headers["Accept-Ranges"]:"not testable"},srcTest:{srces:1},message:"Server does not support Range requests. Make sure server supports Range requests in bytes"},doubleEncoded:{level:1,test:function(e){return e.ajax&&!e.httpError?/[defalte|gzip]/i.test(e.headers["Content-Encoding"]):"not testable"},srcTest:{srces:1},message:"Content of media file is encoded with gzip/defalte. Make sure to not encode it. It's already encoded."},mediaAttachment:{level:1,test:function(e){return e.ajax&&!e.httpError?/attach/i.test(e.headers["Content-Disposition"]):"not testable"},srcTest:{srces:1},message:"Content-Disposition header wants media file to be downloaded, but not to be played."},badTypeMix:{level:1,test:function(e,t){var o=!1,r=e.declaredContainer||e.computedContainer,n=e.headerContainer;return n&&r?n!=r&&(-1!=i.swfMimeTypes.indexOf(r)!=(-1!=i.swfMimeTypes.indexOf(n))&&(o=!0),!o&&t.element.canPlayType&&!!t.element.canPlayType(r)!=!!t.element.canPlayType(n)&&(o=!0)):o="not testable",o},srcTest:{srces:1},message:"Content-Type header and attribute type do not match and are quite different. Set same and proper type value."},typeMix:{level:2.5,test:function(e,t){var o=!1;return!e.headerContainer&&e.declaredContainer&&e.computedContainer&&e.computedContainer!=e.declaredContainer&&(-1!=i.swfMimeTypes.indexOf(e.computedContainer)!=(-1!=i.swfMimeTypes.indexOf(e.declaredContainer))&&(o=!0),!o&&t.element.canPlayType&&!!t.element.canPlayType(e.computedContainer)!=!!t.element.canPlayType(e.declaredContainer)&&(o=!0)),o},srcTest:{srces:1},message:"Computed type and declared type are different. Needs manual check."},hasNoPlayableSrc:{level:1,test:function(e){var o=!1;return t.each(e.srces,(function(t,r){var n=r.declaredContainer||r.computedContainer,s=r.headerContainer||n;return-1!=i.swfMimeTypes.indexOf(n)||e.element.canPlayType&&e.element.canPlayType(n)&&e.element.canPlayType(s)?(o=!0,!1):void 0})),!o},message:"Mediaelement has no source to be played in browser or by plugin. Use at least a video/mp4 source."},endJump:{level:2.5,test:function(e){return e.decode.swf.endJump||e.decode.native.endJump},srcTest:{srces:1},message:"src jumped to end too soon. Check negative timestamps: https://bugzilla.mozilla.org/show_bug.cgi?id=868797"},swfTimeout:{level:3,test:function(e){return e.decode.swf.timeout},srcTest:{srces:1},message:"Could not run decode tests. Maybe moovposition is on end?"},moovPosition:{level:2,test:function(e){return!!e.decode.swf.moovposition&&e.decode.swf.moovposition>300},srcTest:{srces:1}},tabletDecode:{level:2,test:function(e){var o=!1,r=!1;return d&&t.each(e.srces,(function(e,t){var n=t.decode.swf;return"videocodecid"in n&&(o=!0),"avc1"!=n.videocodecid||n.avclevel>31||n.height*n.width>921600?void 0:(r=!0,!1)})),!!o&&!r},message:"Not playable on more than 25% of smartphone and more than 15% of tablet devices. In case you want to support 75% of smartphone- and 90% of tablet devices you need to provide a source encoded with H.264, High Profile (HP), Level 3.1, up to 1280 * 720."},allTabletDecode:{level:3,test:function(e){var o=!1,r=!1;return d&&t.each(e.srces,(function(e,t){var n=t.decode.swf;return"videocodecid"in n&&(o=!0),"avc1"!=n.videocodecid||n.avcprofile>77||n.avclevel>31||n.height*n.width>921600?void 0:(r=!0,!1)})),!!o&&!r},message:"Not playable on more than 15% of smartphone and more than 5% of tablet devices. In case you want to support 90% of smartphone- and 99% of tablet devices you need to provide a source encoded with H.264, Main Profile (HP), Level 3.1, up to 1280 * 720."},smartphoneDecode:{level:3.5,test:function(e){var o=!1,r=!1;return d&&t.each(e.srces,(function(e,t){var n=t.decode.swf;return"videocodecid"in n&&(o=!0),"avc1"!=n.videocodecid||n.avcprofile>77||n.avclevel>30||n.height*n.width>345600?void 0:(r=!0,!1)})),!!o&&!r},message:"Not playable on more than 10% of smartphones: In case you want to support 90% of smartphone- and 99% of tablet devices you need to provide a source encoded with H.264, Main Profile (HP), Level 3.1, up to 720 * 404 / 640 * 480."},notAllSmartphoneDecode:{level:4,test:function(e){var o=!1,r=!1;return d&&t.each(e.srces,(function(e,t){var n=t.decode.swf;return"videocodecid"in n&&(o=!0),"avc1"!=n.videocodecid||n.avcprofile>66||n.avclevel>30||n.height*n.width>307200?void 0:(r=!0,!1)})),!!o&&!r},message:"Not playable on more than 1% of smartphones: In case you want to support 99% of all devices you need to provide a source encoded with H.264, Baseline Profile (BP), Level 3.0, up to 720 * 404 / 640 * 480. You might want to use multiple sources to satisfy quality and maximum device compatibility."},needsFlashInstalled:{level:1,test:function(e){var o=!1,r=!1;return d||t.each(e.srces,(function(t,n){var s=n.declaredContainer||n.computedContainer,a=n.headerContainer||s;return-1!=i.swfMimeTypes.indexOf(s)&&(o=!0),e.element.canPlayType&&("video/youtube"==s||e.element.canPlayType(s)&&e.element.canPlayType(a))?(r=!0,!1):void 0})),o&&!r},message:"While media file could be played by flash plugin, Browser has no flash installed. Use at least a video/mp4 source and install flash. Or add additionally a video/webm file."},hasNoSwfPlayableSrc:{level:1,test:function(e){var o=!1;return t.each(e.srces,(function(e,t){var r=t.declaredContainer||t.computedContainer;return-1!=i.swfMimeTypes.indexOf(r)?(o=!0,!1):void 0})),!o},message:"Mediaelement has no source to be played by fallback plugin. Use at least a video/mp4 source."},hasNoNativePlayableSrc:{level:4,test:function(e){var o=!1;return e.element.canPlayType&&t.each(e.srces,(function(t,r){var n=r.declaredContainer||r.computedContainer,s=r.headerContainer||n;return"video/youtube"==n||e.element.canPlayType(n)&&e.element.canPlayType(s)?(o=!0,!1):void 0})),!o},message:"Mediaelement has no source to be played native. Use at least a video/mp4 and a video/webm source."},misLeadingAttrMode:{level:2,test:function(e){return e.srces.length>1&&e.srces[0].attrMode},message:"Mediaelement has a src attribute and some source child elements. Only src attribute is used."},emptySrc:{level:2,test:function(e){return e.src&&!e.attrSrc},srcTest:{poster:1,srces:1},message:"The src or poster attribute is an empty string, which is not allowed."}},p=0,m={},f=function(e){var t=this;setTimeout((function(){a(t)}),100*e)};console.log('Running mediaelement debugger. Only run these tests in development never in production. set webshim.setOptions("debug", false); to remove. Debugger only tests media on same domain and does not test all file encoding issues. So there is still room to fail!'),e.cfg.extendNative&&console.log('mediaelement debugger does not detect all problems with extendNative set to true. Please set webshim.setOptions("extendNative", false);'),e.addReady((function(e,o){t("video, audio",e).add(o.filter("video, audio")).each(f)})),e.mediaelement.getMediaInfo=a}}(webshim,webshim.$);