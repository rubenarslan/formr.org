!function(t){"use strict";var e=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,o=t.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),n=o&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),r=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,a=(o||r)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(t){var e,a,l,i,b,s;for(e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):decodeURIComponent(t.split(",")[1]),a=new ArrayBuffer(e.length),l=new Uint8Array(a),i=0;i<e.length;i+=1)l[i]=e.charCodeAt(i);return b=t.split(",")[0].split(":")[1].split(";")[0],o?new Blob([n?l:a],{type:b}):((s=new r).append(a),s.getBlob(b))};t.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(t,o,n){t(n&&e.toDataURL&&a?a(this.toDataURL(o,n)):this.mozGetAsFile("blob",o))}:e.toDataURL&&a&&(e.toBlob=function(t,e,o){t(a(this.toDataURL(e,o)))})),t.dataURLtoBlob=a}(this),webshim.isReady("canvas-blob",!0);