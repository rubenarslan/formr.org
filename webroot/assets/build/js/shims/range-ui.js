!function(t){"use strict";var i=function(t,i){return"number"==typeof t||t&&t==1*t?1*t:i},e=["step","min","max","readonly","title","disabled","tabindex"],s=function(){var t={touchstart:1,touchend:1,touchmove:1},i=["pageX","pageY"];return function(e){if(t[e.type]&&e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length)for(var s=0;s<i.length;s++)e[i[s]]=e.originalEvent.touches[0][i[s]];return e}}(),n={_create:function(){var i;for(this.element.addClass(this.options.baseClass||"ws-range ws-input").attr({role:"slider"}).append('<span class="ws-range-rail ws-range-track"><span class="ws-range-min ws-range-progress" /><span class="ws-range-thumb"><span><span data-value="" data-valuetext="" /></span></span></span>'),this.trail=t(".ws-range-track",this.element),this.range=t(".ws-range-progress",this.element),this.thumb=t(".ws-range-thumb",this.trail),this.thumbValue=t("span[data-value]",this.thumb),this.updateMetrics(),this.orig=this.options.orig,i=0;i<e.length;i++)this[e[i]](this.options[e[i]]);this.value=this._value,this.value(this.options.value),this.initDataList(),this.element.data("rangeUi",this),this.addBindings(),this._init=!0},value:t.noop,_value:function(i,e,s){var n,a,o=this.options,r=i,h={},l={};e||parseFloat(i,10)==i||(i=o.min+(o.max-o.min)/2),e||(i=this.normalizeVal(i)),n=(i-o.min)/(o.max-o.min)*100,this._init&&i==o.value&&r==i||(o.value=i,t.fn.stop&&(this.thumb.stop(),this.range.stop()),l[this.dirs.width]=n+"%",this.vertical&&(n=Math.abs(n-100)),h[this.dirs.left]=n+"%",s&&t.fn.animate?((s="object"!=typeof s?{}:t.extend({},s)).duration||(a=Math.abs(n-parseInt(this.thumb[0].style[this.dirs.left]||50,10)),s.duration=Math.max(Math.min(999,5*a),99)),this.thumb.animate(h,s),this.range.animate(l,s)):(this.thumb[0].style[this.dirs.left]=h[this.dirs.left],this.range[0].style[this.dirs.width]=l[this.dirs.width]),this.orig&&(r!=i||!this._init&&this.orig.value!=i)&&this.options._change(i),this._setValueMarkup())},_setValueMarkup:function(){var i=this.options,e=i.textValue?i.textValue(this.options.value):i.options[i.value]||i.value;this.element[0].setAttribute("aria-valuenow",this.options.value),this.element[0].setAttribute("aria-valuetext",e),this.thumbValue[0].setAttribute("data-value",this.options.value),this.thumbValue[0].setAttribute("data-valuetext",e),i.selectedOption&&(t(i.selectedOption).removeClass("ws-selected-option"),i.selectedOption=null),i.value in i.options&&(i.selectedOption=t('[data-value="'+i.value+'"].ws-range-ticks',this.trail).addClass("ws-selected-option"))},initDataList:function(){if(this.orig){var i,e=this,s=function(){t(e.orig).jProp("list").off("updateDatalist",s).on("updateDatalist",s),clearTimeout(i),i=setTimeout((function(){e.list&&e.list()}),9)};t(this.orig).on("listdatalistchange",s),this.list()}},list:function(){var i=this.options,e=i.min,s=i.max,n=this.trail,a=this;this.element.attr({"aria-valuetext":i.options[i.value]||i.value}),t(".ws-range-ticks",n).remove(),t(this.orig).jProp("list").find("option:not([disabled])").each((function(){i.options[t.prop(this,"value")]=t.prop(this,"label")||""})),t.each(i.options,(function(o,r){if(!(!function(t){return"number"==typeof t||t&&t==1*t}(o)||e>o||o>s)){var h=(o-e)/(s-e)*100,l='data-value="'+o+'"';r&&(l+=' data-label="'+r+'"',i.showLabels&&(l+=' title="'+r+'"')),a.vertical&&(h=Math.abs(h-100)),a.posCenter(t('<span class="ws-range-ticks"'+l+' style="'+a.dirs.left+": "+h+'%;" />').appendTo(n))}})),i.value in i.options&&this._setValueMarkup()},readonly:function(t){t=!!t,this.options.readonly=t,this.element.attr("aria-readonly",""+t),this._init&&this.updateMetrics()},disabled:function(t){t=!!t,this.options.disabled=t,this.element.attr(t?{tabindex:-1,"aria-disabled":"true"}:{tabindex:this.options.tabindex,"aria-disabled":"false"}),this._init&&this.updateMetrics()},tabindex:function(t){this.options.tabindex=t,this.options.disabled||this.element.attr({tabindex:t})},title:function(t){this.element.prop("title",t)},min:function(t){this.options.min=i(t,0),this.element.attr("aria-valuemin",this.options.min),this.value(this.options.value,!0)},max:function(t){this.options.max=i(t,100),this.element.attr("aria-valuemax",this.options.max),this.value(this.options.value,!0)},step:function(t){var e=this.options,s="any"==t?"any":i(t,1);e.stepping&&webshims.error("stepping was removed. Use stepfactor instead."),e.stepfactor&&"any"!=s&&(s*=e.stepfactor),e.step=s,this.value(this.options.value)},normalizeVal:function(t){var i,e,s,n=this.options;return t<=n.min?t=n.min:t>=n.max?t=n.max:"any"!=n.step&&(s=n.step,e=t-(i=(t-n.min)%s),2*Math.abs(i)>=s&&(e+=i>0?s:-s),t=1*e.toFixed(5)),t},doStep:function(t,e){var s=i(this.options.step,1);"any"==this.options.step&&(s=Math.min(s,(this.options.max-this.options.min)/10)),this.value(this.options.value+s*t,!1,e)},getStepedValueFromPos:function(t){var i,e,s,n;return 0>=t?i=this.options[this.dirs[this.isRtl?"max":"min"]]:t>100?i=this.options[this.dirs[this.isRtl?"min":"max"]]:((this.vertical||this.isRtl)&&(t=Math.abs(t-100)),i=(this.options.max-this.options.min)*(t/100)+this.options.min,"any"!=(n=this.options.step)&&(s=i-(e=(i-this.options.min)%n),2*Math.abs(e)>=n&&(s+=e>0?n:-n),i=1*s.toFixed(5))),i},addRemoveClass:function(t,i){var e,s=-1!=this.element.prop("className").indexOf(t);!i&&s?(e="removeClass",this.element.removeClass(t),this.updateMetrics()):i&&!s&&(e="addClass"),e&&(this.element[e](t),this._init&&this.updateMetrics())},addBindings:function(){var i,e,n,a,o=this,r=this.options,h=function(){var i={};return{init:function(e,s,n){i[e]||(i[e]={fn:n},o.orig&&t(o.orig).on(e,(function(){i[e].val=t.prop(o.orig,"value")}))),i[e].val=s},call:function(t,e){i[t].val!=e&&(clearTimeout(i[t].timer),i[t].val=e,i[t].timer=setTimeout((function(){i[t].fn(e,o)}),0))}}}(),l=function(t,i){t!=r.value&&(o.value(t,!1,i),h.call("input",t))},u=function(t,n){"touchmove"==t.type&&(t.preventDefault(),s(t)),l(o.getStepedValueFromPos((t[o.dirs.mouse]-i)*e),n),t&&"mousemove"==t.type&&t.preventDefault()},p=function(i){!i||"mouseup"!=i.type&&"touchend"!=i.type||(h.call("input",r.value),h.call("change",r.value)),o.addRemoveClass("ws-active"),t(document).off("mousemove touchmove",u).off("mouseup touchend",p),t(window).off("blur",d),a=!1},d=function(t){t.target==window&&p()},m=function(n){if(!a&&("touchstart"!=n.type||n.originalEvent&&n.originalEvent.touches&&1==n.originalEvent.touches.length)&&(n.preventDefault(),t(document).off("mousemove touchmove",u).off("mouseup touchend",p),t(window).off("blur",d),!r.readonly&&!r.disabled)){if(h.init("input",r.value),h.init("change",r.value),s(n),o.element.trigger("focus"),o.addRemoveClass("ws-active",!0),i=o.element.offset(),!(e=o.element[o.dirs.innerWidth]())||!i)return;i=i[o.dirs.pos],e=100/e,"ws-range-ticks"==n.target.className?l(n.target.getAttribute("data-value"),r.animate):u(n,r.animate),a=!0,t(document).on("touchstart"==n.type?{touchend:p,touchmove:u}:{mouseup:p,mousemove:u}),t(window).on("blur",d),n.stopPropagation()}},c={"touchstart mousedown":m,focus:function(){r.disabled||n||(a||(h.init("input",r.value),h.init("change",r.value)),o.addRemoveClass("ws-focus",!0),o.updateMetrics()),n=!0},blur:function(){o.element.removeClass("ws-focus ws-active"),o.updateMetrics(),n=!1,h.init("input",r.value),h.call("change",r.value)},keyup:function(){o.addRemoveClass("ws-active"),h.call("input",r.value),h.call("change",r.value)},keydown:function(t){var i=!0,e=t.keyCode;r.readonly||r.disabled||(o.isRtl&&(39==e?e=37:37==e&&(e=39)),39==e||38==e?o.doStep(1):37==e||40==e?o.doStep(-1):33==e?o.doStep(10,r.animate):34==e?o.doStep(-10,r.animate):36==e?o.value(o.options.max,!1,r.animate):35==e?o.value(o.options.min,!1,r.animate):i=!1,i&&(o.addRemoveClass("ws-active",!0),h.call("input",r.value),t.preventDefault()))}};h.init("input",r.value,this.options.input),h.init("change",r.value,this.options.change),c[t.fn.mwheelIntent?"mwheelIntent":"mousewheel"]=function(t,i){i&&n&&!r.readonly&&!r.disabled&&(o.doStep(i),t.preventDefault(),h.call("input",r.value))},this.element.on(c),this.thumb.on({mousedown:m}),this.orig&&t(this.orig).jProp("form").on("reset",(function(){var i=t.prop(o.orig,"value");o.value(i),setTimeout((function(){var e=t.prop(o.orig,"value");i!=e&&o.value(e)}),4)})),window.webshims&&webshims.ready("WINDOWLOAD",(function(){webshims.ready("dom-support",(function(){if(t.fn.onWSOff){var i,e=function(){o.updateMetrics()};o.element.onWSOff("updateshadowdom",(function(){clearTimeout(i),i=setTimeout(e,100)}))}})),!t.fn.onWSOff&&webshims._polyfill&&webshims._polyfill(["dom-support"])}))},posCenter:function(t,i){var e,s;!this.options.calcCenter||this._init&&!this.element[0].offsetWidth||(t||(t=this.thumb),s=t[0].style,i||(i=t[this.dirs.outerWidth]()),i/=-2,s[this.dirs.marginLeft]=i+"px",this.options.calcTrail&&t[0]==this.thumb[0]&&(e=this.element[this.dirs.innerHeight](),s[this.dirs.marginTop]=(t[this.dirs.outerHeight]()-e)/-2+"px",this.range[0].style[this.dirs.marginTop]=(this.range[this.dirs.outerHeight]()-e)/-2+"px",this.range[0].style[this.dirs.posLeft]=i+"px",i*=-1,this.range[0].style[this.dirs.paddingRight]=i+"px",this.trail[0].style[this.dirs.left]=i+"px",this.trail[0].style[this.dirs.right]=i+"px"))},updateMetrics:function(){var t=this.element.innerWidth();this.vertical=t&&this.element.innerHeight()-t>10,this.dirs=this.vertical?{mouse:"pageY",pos:"top",posLeft:"bottom",paddingRight:"paddingTop",min:"max",max:"min",left:"top",right:"bottom",width:"height",innerWidth:"innerHeight",innerHeight:"innerWidth",outerWidth:"outerHeight",outerHeight:"outerWidth",marginTop:"marginLeft",marginLeft:"marginTop"}:{mouse:"pageX",pos:"left",posLeft:"left",paddingRight:"paddingRight",min:"min",max:"max",left:"left",right:"right",width:"width",innerWidth:"innerWidth",innerHeight:"innerHeight",outerWidth:"outerWidth",outerHeight:"outerHeight",marginTop:"marginTop",marginLeft:"marginLeft"},this.vertical||"rtl"!=this.element.css("direction")||(this.isRtl=!0,this.dirs.left="right",this.dirs.right="left",this.dirs.marginLeft="marginRight",this.dirs.posLeft="right"),this.element[this.vertical?"addClass":"removeClass"]("vertical-range")[this.isRtl?"addClass":"removeClass"]("ws-is-rtl"),this.updateMetrics=this.posCenter,this.posCenter()}};t.fn.rangeUI=function(i){return i=t.extend({readonly:!1,disabled:!1,tabindex:0,min:0,step:1,max:100,value:50,input:t.noop,change:t.noop,_change:t.noop,showLabels:!0,options:{},calcCenter:!0,calcTrail:!0},i),this.each((function(){var e=t.extend(function(t){function i(){}return i.prototype=t,new i}(n),{element:t(this)});e.options=i,e._create.call(e)}))},t.fn.rangeUI.normalizeTouch=s,window.webshims&&webshims.isReady&&webshims.isReady("range-ui",!0)}(window.webshims?webshims.$:jQuery);