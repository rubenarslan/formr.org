webshims.register("mediacontrols",(function(e,a,t){"use strict";var r=a.cfg.mediaelement.jme,i=r.selector,s=e.jme,n='<button class="{%class%}" type="button" aria-label="{%text%}"></button>',o='<div class="{%class%} media-range" aria-label="{%text%}"></div>',d='<div  class="{%class%}">00:00</div>',l=function(){var e,a="";if(t.Audio)try{(e=new Audio).volume=.55,a=Math.round(100*e.volume)/100==.55?"":" no-volume-api"}catch(e){}return a}(),c=function(){var e={},t=/\{\{(.+?)\}\}/gim;return function(i,n){return i||(i=r.barTemplate),(!e[i]||n)&&(e[i]=i.replace(t,(function(e,t){var r=s.plugins[t];return r?(r.structure||(a.warn("no structure option provided for plugin: "+t+". Fallback to standard div"),r.structure='<div class="{%class%}"></div>'),r.structure.replace("{%class%}",t).replace("{%text%}",r.text||"")):e}))),e[i]||""}}(),u=/iP(hone|od|ad)/i.test(navigator.platform),p=u&&parseInt((navigator.appVersion.match(/OS (\d+)_\d+/)||["","8"])[1],10)<7,m=t.Modernizr,v=!(m&&m.videoautoplay||!u&&!/android/i.test(navigator.userAgent)),y=function(){y.loaded||(y.loaded=!0,a.loader.loadList(["mediacontrols-lazy","range-ui"]))},f=function(t){t||(t="_create");var r=function(i,s){var n=this,o=arguments;y(),a.ready("mediacontrols-lazy",(function(){return r!=n[t]&&e.data(s[0])?n[t].apply(n,o):void a.error("stop too much recursion")}))};return r};a.loader.addModule("mediacontrols-lazy",{src:"jme/mediacontrols-lazy",d:["dom-support"]});var g={_create:f()};s.plugins.useractivity=g,s.defineProp("controlbar",{set:function(i,n){n=!!n;var o,d,l=s.data(i),u=e("div.jme-mediaoverlay, div.jme-controlbar",l.player),m="";if(n&&!u[0])if(l._controlbar)l._controlbar.appendTo(l.player);else{p&&(l.media.removeAttr("controls"),l.media.mediaLoad()),v&&l.player.addClass("has-yt-bug"),l.media.prop("controls",!1),m=c(),l._controlbar=e(r.barStructure),u=l._controlbar.find("div.jme-cb-box").addClass("media-controls"),o=(o=l._controlbar.filter(".jme-media-overlay")).add(u),e(m).appendTo(u),l._controlbar.appendTo(l.player),l.player.jmeFn("addControls",o),d=function(){var e={},a=[{size:290,name:"xx-small",names:"s xs xxs"},{size:380,name:"x-small",names:"s xs"},{size:478,name:"small",names:"s"},{size:756,name:"medium",names:"m"},{size:1024,name:"large",names:"l"},{size:Number.MAX_VALUE,name:"x-large",names:"l xl"}],t=a.length;return function(){var r,i=0,s=l.player.outerWidth();for(s*=16/Math.max(parseInt(l.player.css("fontSize"),10)||16,13);t>i;i++)if(a[i].size>=s){r=a[i];break}e.name!=r.name&&(e=r,l.player.attr("data-playersize",r.name),l.player.attr("data-playersizes",r.names))}}();var y=e('<div class="ws-poster" />').insertAfter(l.media),f=function(){var e,a,r,i,s=t.swfmini&&swfmini.hasFlashPlayerVersion("10.0.3"),n=/youtube\.com\/[watch\?|v\/]+/i,o=l.media.prop("paused"),d=l.media.prop("ended");return o&&l.player.addClass("initial-state"),d&&l.player.addClass("ended-state"),"backgroundSize"in y[0].style||l.player.addClass("no-backgroundsize"),l.media.on("play playing waiting seeked seeking",(function(e){e||(e.type="playing"),!o||i&&v&&"playing"!=e.type&&!l.media.prop("readyState")&&!l.media.prop("networkState")||(o=!1,l.player.removeClass("initial-state")),d&&(d=!1,l.player.removeClass("ended-state"))})),l.media.on("ended",(function(){d||l.media.prop("loop")||!l.media.prop("ended")||(d=!0,l.player.addClass("ended-state"))})),function(){var t,c=l.media.attr("poster"),u=!!c,p=l.media.prop("currentSrc")||"";i=n.test(p),t=(!s||!u)&&i,!u&&i&&(c=p.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i)||"")&&(u=!!(c="https://img.youtube.com/vi/"+c[1]+"/0.jpg")),r!==c&&(r=c,y[0].style.backgroundImage=c?"url("+c+")":""),e!==u&&(e=u,l.player[u?"removeClass":"addClass"]("no-poster")),l.media.prop("paused")&&(l.player.addClass("initial-state"),o=!0),d&&(d=!1,l.player.removeClass("ended-state")),l.player[i?"addClass":"removeClass"]("yt-video"),a!==t&&(a=t,l.player[t?"addClass":"removeClass"]("has-ytposter"))}}();g._create(l.player,l.media,l.player),l.media.on("emptied loadstart",(function(){setTimeout(f)})),d(),f(),a.ready("dom-support",(function(){l.player.onWSOff("updateshadowdom",d),o.add(l._controlbar).add(y).addClass(a.shadowClass),a.addShadowDom()}))}else n||u.detach();return n}}),s.registerPlugin("play-pause",{structure:n,text:"play / pause",_create:f()}),s.registerPlugin("mute-unmute",{structure:n,text:"mute / unmute",_create:f()}),s.registerPlugin("jme-media-overlay",{_create:f()}),s.registerPlugin("volume-slider",{structure:o,text:"volume level",_create:f()}),s.registerPlugin("time-slider",{structure:o,options:{format:["mm","ss"]},text:"time position",_create:f()}),s.defineProp("format",{set:function(a,t){e.isArray(t)||(t=t.split(":"));var r=s.data(a);return r.format=t,e(a).triggerHandler("updatetimeformat"),r.player.triggerHandler("updatetimeformat"),"noDataSet"}}),s.registerPlugin("duration-display",{structure:d,options:{format:"mm:ss"},_create:f()}),s.defineProp("countdown",{set:function(a,t){var r=s.data(a);return r.countdown=!!t,e(a).triggerHandler("updatetimeformat"),r.player.triggerHandler("updatetimeformat"),"noDataSet"}}),s.registerPlugin("currenttime-display",{structure:d,options:{format:"mm:ss",countdown:!1},_create:f()}),s.registerPlugin("poster-display",{structure:"<div />",options:{},_create:f()}),s.registerPlugin("fullscreen",{options:{fullscreen:!0,autoplayfs:!1},structure:n,text:"enter fullscreen / exit fullscreen",_create:f()}),s.registerPlugin("mediaconfigmenu",{structure:n,text:"configuration",_create:f()}),s.registerPlugin("captions",{structure:n,text:"subtitles",_create:function(a,t,r){var i=t.find("track").filter(':not([kind]), [kind="subtitles"], [data-kind="subtitles"], [kind="captions"], [data-kind="captions"]');a.wsclonedcheckbox=e(a).clone().attr({role:"checkbox"}).insertBefore(a),r.attr("data-tracks",i.length>1?"many":i.length),a.attr("aria-haspopup","true"),f().apply(this,arguments)}}),s.registerPlugin("chapters",{structure:n,text:"chapters",_create:function(e,t,r){var i=t.find("track").filter('[kind="chapters"], [data-kind="chapters"]');e.attr("aria-haspopup","true"),i.length&&(a._polyfill(["track"]),r.addClass("has-chapter-tracks")),f().apply(this,arguments)}}),a.ready(a.cfg.mediaelement.plugins.concat(["mediaelement","jme-base"]),(function(){r.barTemplate||(r.barTemplate='<div class="play-pause-container">{{play-pause}}</div><div class="playlist-container"><div class="playlist-box"><div class="playlist-button-container">{{playlist-prev}}</div><div class="playlist-button-container">{{playlist-next}}</div></div></div><div class="currenttime-container">{{currenttime-display}}</div><div class="progress-container">{{time-slider}}</div><div class="duration-container">{{duration-display}}</div><div class="mute-container">{{mute-unmute}}</div><div class="volume-container">{{volume-slider}}</div><div class="chapters-container"><div class="chapters-controls mediamenu-wrapper">{{chapters}}</div></div><div class="subtitle-container mediamenu-wrapper"><div class="subtitle-controls">{{captions}}</div></div><div class="mediaconfig-container"><div class="mediaconfig-controls mediamenu-wrapper">{{mediaconfigmenu}}</div></div><div class="fullscreen-container">{{fullscreen}}</div>'),r.barStructure||(r.barStructure='<div class="jme-media-overlay"></div><div class="jme-controlbar'+l+'" tabindex="-1"><div class="jme-cb-box"></div></div>'),a.addReady((function(a,t){e(i,a).add(t.filter(i)).jmeProp("controlbar",!0)}))})),a.ready("WINDOWLOAD",y)}));