webshims.register("form-number-date-api",(function(e,t){"use strict";t.addInputType||t.error("you can not call forms-ext feature after calling forms feature. call both at once instead: $.webshims.polyfill('forms forms-ext')"),t.getStep||(t.getStep=function(t,r){var n=e.attr(t,"step");return"any"===n?n:(r=r||i(t),a[r]&&a[r].step?(n=d.number.asNumber(n),(!isNaN(n)&&n>0?n:a[r].step)*(a[r].stepScaleFactor||1)):n)}),t.addMinMaxNumberToCache||(t.addMinMaxNumberToCache=function(e,t,r){e+"AsNumber"in r||(r[e+"AsNumber"]=a[r.type].asNumber(t.attr(e)),isNaN(r[e+"AsNumber"])&&e+"Default"in a[r.type]&&(r[e+"AsNumber"]=a[r.type][e+"Default"]))});var r=parseInt("NaN",10),a=t.inputTypes,n=function(e){return"number"==typeof e||e&&e==1*e},u=function(t){return e('<input type="'+t+'" />').prop("type")===t},i=function(e){return(e.getAttribute("type")||"").toLowerCase()},s=function(e){return e&&!isNaN(1*e)},o=t.addMinMaxNumberToCache,p=function(e,t){t-=(e=""+e).length;for(var r=0;t>r;r++)e="0"+e;return e},l=1e-7,m=t.bugs.bustedValidity;t.addValidityRule("stepMismatch",(function(e,r,n,u){if(""===r)return!1;if("type"in n||(n.type=i(e[0])),"week"==n.type)return!1;var s,p,m=(u||{}).stepMismatch||!1;if(a[n.type]&&a[n.type].step){if("step"in n||(n.step=t.getStep(e[0],n.type)),"any"==n.step)return!1;if("valueAsNumber"in n||(n.valueAsNumber=a[n.type].asNumber(r)),isNaN(n.valueAsNumber))return!1;o("min",e,n),s=n.minAsNumber,isNaN(s)&&(p=e.prop("defaultValue"))&&(s=a[n.type].asNumber(p)),isNaN(s)&&(s=a[n.type].stepBase||0),m=Math.abs((n.valueAsNumber-s)%n.step),m=!(l>=m||Math.abs(m-n.step)<=l)}return m})),[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach((function(e){t.addValidityRule(e.name,(function(t,r,n,u){var s=(u||{})[e.name]||!1;if(""===r)return s;if("type"in n||(n.type=i(t[0])),a[n.type]&&a[n.type].asNumber){if("valueAsNumber"in n||(n.valueAsNumber=a[n.type].asNumber(r)),isNaN(n.valueAsNumber))return!1;if(o(e.attr,t,n),isNaN(n[e.attr+"AsNumber"]))return s;s=n[e.attr+"AsNumber"]*e.factor<n.valueAsNumber*e.factor-l}return s}))})),t.reflectProperties(["input"],["max","min","step"]);var f=t.defineNodeNameProperty("input","valueAsNumber",{prop:{get:function(){var t=this,n=i(t),u=a[n]&&a[n].asNumber?a[n].asNumber(e.prop(t,"value")):f.prop._supget&&f.prop._supget.apply(t,arguments);return null==u&&(u=r),u},set:function(r){var n=this,u=i(n);if(a[u]&&a[u].numberToString){if(isNaN(r))return void e.prop(n,"value","");var s=a[u].numberToString(r);!1!==s?e.prop(n,"value",s):t.error("INVALID_STATE_ERR: DOM Exception 11")}else f.prop._supset&&f.prop._supset.apply(n,arguments)}}}),N=t.defineNodeNameProperty("input","valueAsDate",{prop:{get:function(){var t=this,r=i(t);return a[r]&&a[r].asDate&&!a[r].noAsDate?a[r].asDate(e.prop(t,"value")):N.prop._supget&&N.prop._supget.call(t)||null},set:function(r){var n=this,u=i(n);if(!a[u]||!a[u].dateToString||a[u].noAsDate)return N.prop._supset&&N.prop._supset.apply(n,arguments)||null;if(null===r)return e.prop(n,"value",""),"";var s=a[u].dateToString(r);return!1!==s?(e.prop(n,"value",s),s):void t.error("INVALID_STATE_ERR: DOM Exception 11")}}});e.each({stepUp:1,stepDown:-1},(function(r,n){var u=t.defineNodeNameProperty("input",r,{prop:{value:function(r){var s,o,p,m,f,N,d,b=i(this);if(!a[b]||!a[b].asNumber){if(u.prop&&u.prop._supvalue)return u.prop._supvalue.apply(this,arguments);throw t.info("no step method for type: "+b),"invalid state error"}if(f={type:b},r||(r=1,t.warn("you should always use a factor for stepUp/stepDown")),r*=n,"any"==(s=t.getStep(this,b)))throw t.info("step is 'any' can't apply stepUp/stepDown"),"invalid state error";return t.addMinMaxNumberToCache("min",e(this),f),t.addMinMaxNumberToCache("max",e(this),f),o=e.prop(this,"valueAsNumber"),r>0&&!isNaN(f.minAsNumber)&&(isNaN(o)||f.minAsNumber>o)?void e.prop(this,"valueAsNumber",f.minAsNumber):0>r&&!isNaN(f.maxAsNumber)&&(isNaN(o)||f.maxAsNumber<o)?void e.prop(this,"valueAsNumber",f.maxAsNumber):(isNaN(o)&&(o=0),N=f.minAsNumber,isNaN(N)&&(d=e.prop(this,"defaultValue"))&&(N=a[b].asNumber(d)),N||(N=0),(p=((o=1*(o+(s*=r)).toFixed(5))-N)%s)&&Math.abs(p)>l&&(m=o-p,o=1*(m+=p>0?s:-s).toFixed(5)),!isNaN(f.maxAsNumber)&&o>f.maxAsNumber||!isNaN(f.minAsNumber)&&o<f.minAsNumber?void t.info("max/min overflow can't apply stepUp/stepDown"):void e.prop(this,"valueAsNumber",o))}}})}));var d={number:{bad:function(e){return!n(e)},step:1,stepScaleFactor:1,asNumber:function(e){return n(e)?1*e:r},numberToString:function(e){return!!n(e)&&e}},range:{minDefault:0,maxDefault:100},color:{bad:function(){var e=/^\u0023[a-f0-9]{6}$/;return function(t){return!t||7!=t.length||!e.test(t)}}()},date:{bad:function(e){if(!e||!e.split||!/\d$/.test(e))return!0;var t,r=e.split(/\u002D/);if(3!==r.length)return!0;var a=!1;if(r[0].length<4||2!=r[1].length||r[1]>12||2!=r[2].length||r[2]>33)a=!0;else for(t=0;3>t;t++)if(!s(r[t])){a=!0;break}return a||e!==this.dateToString(this.asDate(e,!0))},step:1,stepScaleFactor:864e5,asDate:function(e,t){return!t&&this.bad(e)?null:new Date(this.asNumber(e,!0))},asNumber:function(e,t){var a=r;return(t||!this.bad(e))&&(e=e.split(/\u002D/),a=Date.UTC(e[0],e[1]-1,e[2])),a},numberToString:function(e){return!!n(e)&&this.dateToString(new Date(1*e))},dateToString:function(e){return!(!e||!e.getFullYear)&&p(e.getUTCFullYear(),4)+"-"+p(e.getUTCMonth()+1,2)+"-"+p(e.getUTCDate(),2)}},time:{bad:function(t,r){if(!t||!t.split||!/\d$/.test(t))return!0;if((t=t.split(/\u003A/)).length<2||t.length>3)return!0;var a,n=!1;return t[2]&&(t[2]=t[2].split(/\u002E/),a=parseInt(t[2][1],10),t[2]=t[2][0]),e.each(t,(function(e,t){return s(t)&&2===t.length?void 0:(n=!0,!1)})),!!n||t[0]>23||t[0]<0||t[1]>59||t[1]<0||!(!t[2]||!(t[2]>59||t[2]<0))||!(!a||!isNaN(a))||(a&&(100>a?a*=100:10>a&&(a*=10)),!0===r&&[t,a])},step:60,stepBase:0,stepScaleFactor:1e3,asDate:function(e){return e=new Date(this.asNumber(e)),isNaN(e)?null:e},asNumber:function(e){var t=r;return!0!==(e=this.bad(e,!0))&&(t=Date.UTC("1970",0,1,e[0][0],e[0][1],e[0][2]||0),e[1]&&(t+=e[1])),t},dateToString:function(e){if(e&&e.getUTCHours){var t=p(e.getUTCHours(),2)+":"+p(e.getUTCMinutes(),2),r=e.getSeconds();return"0"!=r&&(t+=":"+p(r,2)),"0"!=(r=e.getUTCMilliseconds())&&(t+="."+p(r,3)),t}return!1}},month:{bad:function(e){return d.date.bad(e+"-01")},step:1,stepScaleFactor:!1,asDate:function(e){return new Date(d.date.asNumber(e+"-01"))},asNumber:function(e){var t=r;return e&&!this.bad(e)&&((e=e.split(/\u002D/))[0]=1*e[0]-1970,e[1]=1*e[1]-1,t=12*e[0]+e[1]),t},numberToString:function(e){var t,r=!1;return n(e)&&(e=(e-(t=e%12))/12+1970,1>(t+=1)&&(e-=1,t+=12),r=p(e,4)+"-"+p(t,2)),r},dateToString:function(e){if(e&&e.getUTCHours){var t=d.date.dateToString(e);return!(!t.split||!(t=t.split(/\u002D/)))&&t[0]+"-"+t[1]}return!1}},"datetime-local":{bad:function(e,t){return!e||!e.split||2!==(e+"special").split(/\u0054/).length||(e=e.split(/\u0054/),d.date.bad(e[0])||d.time.bad(e[1],t))},noAsDate:!0,asDate:function(e){return e=new Date(this.asNumber(e)),isNaN(e)?null:e},asNumber:function(e){var t=r,a=this.bad(e,!0);return!0!==a&&(e=e.split(/\u0054/)[0].split(/\u002D/),t=Date.UTC(e[0],e[1]-1,e[2],a[0][0],a[0][1],a[0][2]||0),a[1]&&(t+=a[1])),t},dateToString:function(e,t){return d.date.dateToString(e)+"T"+d.time.dateToString(e,t)}}};!m&&u("range")&&u("time")&&u("month")&&u("datetime-local")||(d.range=e.extend({},d.number,d.range),d.time=e.extend({},d.date,d.time),d.month=e.extend({},d.date,d.month),d["datetime-local"]=e.extend({},d.date,d.time,d["datetime-local"])),["number","month","range","date","time","color","datetime-local"].forEach((function(e){(m||!u(e))&&t.addInputType(e,d[e])})),null==e("<input />").prop("labels")&&t.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){if("hidden"==this.type)return null;var t=this.id,r=e(this).closest("label").filter((function(){var e=this.attributes.for||{};return!e.specified||e.value==t}));return t&&(r=r.add('label[for="'+t+'"]')),r.get()},writeable:!1}})}));